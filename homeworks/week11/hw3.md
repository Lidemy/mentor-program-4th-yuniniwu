## 請說明雜湊跟加密的差別在哪裡，為什麼密碼要雜湊過後才存入資料庫

密碼學當中有三兄弟：編碼、加密、雜湊。

編碼（Encode）是指簡單的編碼，單純只是換個方式來表達內容而已，例如摩斯密碼。在摩斯密碼的編碼規則當中，把英文字用不同的長短音組合來表達。所有知道編碼規則的人，都能把訊息翻譯回來。
  
#### 加密 (Encrypt)

- 對稱式加密：
  - 加密解密用同一個金鑰（Key）：凱薩加密法（Caesar cipher）就是把每個英文字加上一個固定的偏移量，以得到加密後的結果。高級一點的有 AES (Advanced Encryption Standard) ，AES 是一種對稱加密演算法，他的 Key 可以高達 $10^{37}$ 種。
  - 優點：速度快，需要較少的計算資源
  - 缺點：知道 Key 就可以被逆推，Key 的傳送可能會被攔截。
- 非對稱式加密
  - 一組兩個 Key 分別叫公鑰（Public Key）跟私鑰（Private Key）， 用公鑰加密的內容只能用私鑰解。
  - 下面舉例：小明知道小美又要傳情書給他了，小明(要接收密碼的那一端)先產生一對公鑰、私鑰。把公鑰寄給小美，讓小美用公鑰對情書加密，再把情書寄給小明。小明收到之後就可以用他手上的私鑰解開。
  - 優點：安全性很高
  - 缺點：速度較對稱式加密來得慢，需要較多的計算資源。

#### 雜湊 (Hash)

- 無法被逆推
- 經過雜湊演算法算出來的職稱為雜湊值。
- 無限的組合會對應到有限的值。
- 可能發生碰撞（ 2 組不同的 input 雜湊之後得到 1 組一模一樣的 output，機率很小）。
- 最有名的是 MD5 演算法，但已被證實不安全。另外我知道的還有 SHA-256 演算法。
- 通常會對原本的輸入加上一些隨機字串（俗稱salting）之後，再去進行雜湊，能提高破解的難度。

#### 為什麼密碼要雜湊過後才存入資料庫

在開發網站的時候，如果密碼沒有經過雜湊，而是直接存明碼在資料庫的話，密碼很容易外洩：

- 情境一：網站管理員如果是個壞人，就能把你的帳密個資拿去賣錢，為自己賺外快。
- 情境二：駭客如果入侵資料庫，就能不費吹灰之力拿到你的密碼。

拿到密碼後，就能拿去其他網站試試，成功的話就能利用你的 PCHOME 帳戶幫他自己買 iPhone 12，但刷的是你的卡。

---
## `include`、`require`、`include_once`、`require_once` 的差別
 
他們都是在 PHP 語法中引入檔案的關鍵字。

`include` 、`require` 用來引入特定的檔案，並載入檔案中全部的內容。但他們有個缺點是，當重複引入同名的檔案時，無法判斷前面有沒有引入過了，而會使程式產生錯誤。因此衍生出`include_once`、`require_once`。這兩個語法會先檢查檔案是否已經在其他地方被引入，有的話就不會重複引入。

#### `include` 、`require` 之間主要的差別在於，當引入檔案有錯誤出現時，這兩個會有不同的反應

- `include`: 跳出警告，程式會繼續執行。
- `require`: 跳出錯誤訊息，並**停止**執行程式。

---
## 請說明 SQL Injection 的攻擊原理以及防範方法

駭客可以透過網站中可以輸入資料的地方（網址、任何可以輸入資料的地方），技巧性的改寫原本的 SQL query 內容，進而達到攻擊的目的，竊取資料庫裡的東西。

主要的防範方式，是在開發時對所有需要用到 SQL query 的地方，都使用 Prepared Statement。

---
##  請說明 XSS 的攻擊原理以及防範方法

XSS 跟 SQL Injection 有點類似。但差別在用的是 Javascript。駭客會在任何可以插入 JS 語法的地方試著攻擊，在網站中植入惡意的 script，當其他的用戶瀏覽到這個網站時，這段 code 被執行，駭客就可以知道這個用戶的 Cookie、或把這個用戶導到其他的網站。XSS 最根本的防禦方法是，對所有的輸出都做跳脫字元 encoding。


---
## 請說明 CSRF 的攻擊原理以及防範方法

CSRF 是一種常見的網路攻擊，駭客會在其他網頁塞入一個你原本會用的網站的連結，冒用你的身份 (Cookie)，對其他網站發送 request，

例如說你今天在逛一個內容網站，想看阿基師介紹鳳梨苦瓜雞湯怎麼做，當你點下一張圖片想看更多資訊，駭客卻偷偷在圖片裡塞一個你常用的銀行網站連結，如果這時候你其他分頁剛好就是那個銀行網站，而且你剛好在查看你的帳戶餘額，這時候駭客就能透過 server side 對瀏覽器的信任，經由你點那張內容網站的圖片，發送 request 給銀行，進而把你帳戶裡的錢傳走。駭客能這樣做，是利用了瀏覽器的機制：只要發送 request 給某個網域，瀏覽器就會幫你把那個網域相關的 Cookie 也一起帶上去。對於銀行 server side 來說，這個request 看起來就是使用者本人發出的。

CSRF 就是在不同的 domain 底下卻能夠偽造「使用者本人發出的 request 」這種情境。

#### 防範方法

- 簡訊或圖形驗證：在使用者要進行某些敏感操作的時候，對使用者身份再進行一次驗證。
- 不要用 Cookie 做身份驗證
- CSRF token：在 `form` 裡面加上一個看不見的 `input` 欄位，存 csrftoken，這裡面的值最好由 client side 產生，並存在 Client 的 Cookie 資訊裡。
- Samesite Cookie：Chrome 瀏覽器內建的防禦方式，幫 Cookie 再加上一層驗證，不允許跨站請求。

---
## 參考資料來源

[一次搞懂密碼學中的三兄弟 — Encode、Encrypt 跟 Hash | by Larry Lu | Starbugs Weekly 星巴哥技術專欄 | Medium](https://medium.com/starbugs/what-are-encoding-encrypt-and-hashing-4b03d40e7b0c)

[PHP：require V.S. include « 程式初學者](http://code-beginner.logdown.com/posts/389687-phprequire-vs-include)

[[第十二週] 資訊安全 - 常見攻擊：XSS、SQL Injection | Yakim shu](https://yakimhsu.com/project/project_w12_Info_Security-XSS_SQL.html)